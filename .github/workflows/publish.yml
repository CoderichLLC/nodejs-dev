on:
  push:
    branches:
      - 'release/**'

env:
  NPM_TOKEN: ${{ secrets.NPM_TOKEN }}
  GIT_BRANCH: ${{ vars.GITHUB_REF_NAME }}
  GIT_USER: 'Richard Livolsi'
  GIT_EMAIL: 'richard.livolsi@gmail.com'

jobs:
  publish:
    runs-on: 'ubuntu-latest'
    steps:
      - uses: 'actions/checkout@v3'
      - uses: 'actions/setup-node@v3'
        with:
          node-version: '18'
      - run: 'npm ci'
      - run: 'git config user.name "${{ env.GIT_USER }}"'
      - run: 'git config user.email "${{ env.GIT_EMAIL }}"'
      - run: 'npm run dev npmPublish'
